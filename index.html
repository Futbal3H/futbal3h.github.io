<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="Content-Language" content="en">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<meta name="google" content="notranslate">
		<meta name="robots" content="no-index, no-follow" />
		<meta name="googlebot" content="no-index, no-follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
		<meta name="bingbot" content="no-index, no-follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
		<link rel="icon" type="image/png" href="/favicon.png" />
		<link rel="author" href="https://futbal3h.github.io" />
		<link rel="canonical" href="https://futbal3h.github.io/" />
		<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
		<link href="https://unpkg.com/tabulator-tables@5.2.3/dist/css/tabulator.min.css" rel="stylesheet">
		<script type="text/javascript" src="https://unpkg.com/tabulator-tables@5.2.3/dist/js/tabulator.min.js"></script>
		<link href="/css/tabulator_bootstrap5.min.css" rel="stylesheet">
		<script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
		<style type="text/css">
.full-window-height { min-height: 100vh; }
:-webkit-full-screen div.fullscreen { display: none; }
.lfo-icon-secondary, .lfo-icon-over-secondary:hover {filter: invert(67%) sepia(27%) saturate(733%) hue-rotate(355deg) brightness(102%) contrast(95%);}
.lfo-font-monospace {font-family: 'Courier New', Courier, monospace;}
.lfo-icon-white {filter: invert(100%) sepia(0%) saturate(0%) hue-rotate(93deg) brightness(103%) contrast(103%);}
.lfo-icon-white:hover {filter: invert(76%) sepia(93%) saturate(1921%) hue-rotate(352deg) brightness(100%) contrast(103%);}
		</style>
		<!--  PWA  -->
		<link rel="manifest" href="/manifest.webmanifest">
		<meta name="application-name" content="Futbal 3H">
		<link rel="icon" sizes="192x192" href="/media/app/futbal3h-app-icon-192.png">
		<meta name="theme-color" content="#198754">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="white">
		<meta name="apple-mobile-web-app-title" content="Futbal 3H">
		<link rel="apple-touch-icon" href="/media/app/futbal3h-app-icon-180.png">
		<link rel="apple-touch-startup-image" href="/media/app/futbal3h-launch-1242x2688.png">
		<link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)" href="/media/app/futbal3h-launch-1242x2688.png">
		<link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)" href="/media/app/futbal3h-launch-828x1792.png">
		<link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)" href="/media/app/futbal3h-launch-1125x2436.png">
		<link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3)" href="/media/app/futbal3h-launch-1242x2208.png">
		<link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" href="/media/app/futbal3h-launch-750x1334.png">
		<link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)" href="/media/app/futbal3h-launch-2048x2732.png">
		<link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)" href="/media/app/futbal3h-launch-1668x2388.png">
		<link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)" href="/media/app/futbal3h-launch-1668x2224.png">
		<link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)" href="/media/app/futbal3h-launch-1536x2048.png">
		<meta name="msapplication-TileImage" content="/media/app/futbal3h-app-icon-144.png">
		<meta name="msapplication-TileColor" content="#198754">
	</head>
	<body class="full-window-height position-relative bg-white text-black link-primary">
		<div id="f3hApp"></div>
		<!--  Progress Spinner  -->
		<div id="f3hSpinner" class="fade show position-fixed top-0 start-0 bottom-0 end-0 bg-dark bg-opacity-25" style="display:none;z-index:32767">
			<div class="vstack gap-4 position-absolute top-50 start-50 translate-middle bg-dark bg-opacity-75 p-5 rounded-3 shadow">
				<div class="d-flex justify-content-center">
					<div class="spinner-border text-white" role="status" style="width:100px;height:100px">
						<span class="visually-hidden">Loading...</span>
					</div>
				</div>
				<div class="text-white fs-4 fw-semibold mx-5">Loading...</div>
			</div>
		</div>
		<script type="text/javascript">
			var F3HEngine = {
				k : {
					storeID : 'io.github.futbal3h.userData'
				},
				api : {
					url : 'https://script.google.com/macros/s/AKfycbw184kZfYrbnNQw3Vu-s4HS9XdRclA1FhNq_04aaGQT1YLLzWBznRXJJoZV8Rjrjiw/exec',
					request : (payload) => {
						$('#f3hSpinner').show();
						payload.sessionStamp = F3HEngine.inits.sessionStamp();
console.log(JSON.stringify(payload));
						fetch(F3HEngine.api.url, { method: 'post', mode: 'cors', body: JSON.stringify(payload) })
							.then( function (res) { try { return res.json() } catch(err) { console.log('Error: ' + err.message) } })
							.then( function (json) {
								$('#f3hApp').data(json.data);
								if (json.session) {
									let store = F3HEngine.localStorage(F3HEngine.k.storeID);
									Object.keys(json.session).forEach((key) => { store[key] = json.session[key]; });
									window.localStorage.setItem(F3HEngine.k.storeID, JSON.stringify(store));
									F3HEngine.app.setData( { sessionStamp : F3HEngine.inits.sessionStamp() } );
								};
								Object.keys(json.outputs).forEach(key => { $(document).find(key).html(json.outputs[key]); });
								json.actions.forEach((action) => { eval(action); });
								$('#f3hSpinner').hide();
							});
					}
				},
				app : {
					setData : (obj) => { Object.keys(obj).forEach((key) => { $('#f3hApp').data(key, obj[key]); }); }
				},
				localStorage : (sid='io.github.futbal3h.userData') => {
					var items = {};
					const data = window.localStorage.getItem(sid);
					if (data) {
						try {
							items = JSON.parse(data);
						}
						catch(err) {
							items = {};
						}
					} else {
						items = {};
					}
					return items;
				},
				loader : {},
				inits : {
					sessionStamp : () => {
						const idKey = 'sessionStamp';
						var store = F3HEngine.localStorage(F3HEngine.k.storeID);
						return (idKey in store) ? store[idKey] : {};
					},
					loader : () => {
						const inputs = new URLSearchParams(window.location.search);
						const inputKeys = [...inputs.keys()];
						const inputVals = [...inputs.values()];
						const initIDs = (inputKeys.length > 0 && inputVals[0] == '') ? inputKeys[0] : '';
						const initCmd = (inputKeys.length > 1 && inputVals[1] == '') ? inputKeys[1] : '';

						if (initIDs == 'signOut') { window.localStorage.clear(); return; }
					},
					handlers : () => {
						$(document).on('change', '[data-f3h-pass-to]', function() {
							const t = $(this).data('f3hPassTo');
							const o = $(t).data('f3hData') || {};
							o[$(this).data('f3hPassAs')] = $(this).val();
							$(t).data('f3hData', o);
						});
						$(document).on('click', '[data-f3h-action]', function() {
							const id = $(this).data('f3hCollector');
							if (id) {
								const o = $(this).data('f3hData') || {};
								$(`[data-f3h-collect-in="${id}"]`).each(function() {
									let val = '';
									switch($(this).attr('type')) {
										case 'checkbox':
											val = $(this).is(':checked'); break;
										default:
											val = $(this).val();
									}
									o[$(this).data('f3hCollectAs')] = val;
								});
								$(this).data('f3hData', o);
							}
							F3HEngine.api.request($(this).data());
						});
					}
				},
				init : () => {
					F3HEngine.loader = F3HEngine.inits.loader();
				},
				utilities : {
					connectRedirect : (url) => { window.location.href = url; },
					input : {
						phoneNumber : function(event) { return /[\d/+()\s]/.test(String.fromCharCode(event.keyCode || event.which)); },
						filter : function(event) {
							const matcher = new RegExp($(this).attr('data-lfo-chars'), 'g');
							return matcher.test(String.fromCharCode(event.keyCode || event.which));
						}
					}
				},
				ui : {
					closeDialog(fid) { $(fid).find('form').trigger('reset'); $(fid).modal({}); $(fid).modal('hide'); }
				}
			};
			F3HEngine.init();
			$(function() {
				F3HEngine.inits.handlers();
				F3HEngine.api.request({ f3hLayout : 'main', f3hScreen : 'home' });
			});
		</script>
	</body>
</html>
